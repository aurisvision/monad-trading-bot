# ๐ง Rate Limit Fix Instructions

## ุงููุดููุฉ
ูุธุงู ุชุฃููู ุงูููุงุชูุญ ุงูุฎุงุตุฉ ุนุงูู ููุฐ 3 ุฃูุงู ููุง ูุชู ุฅุนุงุฏุฉ ุชุนููู ุงููุคูุช ุจุดูู ุตุญูุญ.

## ุงูุณุจุจ
ุชู ุงูุนุซูุฑ ุนูู ุฎุทุฃ ูู ุงูููุฏ ูู ููู `AdvancedRateLimiter.js` ุญูุซ ุชู ุงุณุชุฎุฏุงู `Math.min` ุจุฏูุงู ูู `Math.max` ูุญุณุงุจ ููุช ุฅุนุงุฏุฉ ุงูุชุนููู.

## ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ ุงูุฎุทุฃ ุงูุฃุณุงุณู โ
- ุชู ุฅุตูุงุญ ุงูุฎุทุฃ ูู `src/security/AdvancedRateLimiter.js` ุงูุณุทุฑ 358
- ุชู ุชุบููุฑ `Math.min` ุฅูู `Math.max` ูู ุญุณุงุจ `resetTime`

### 2. ุฃุฏูุงุช ุงูุชุดุฎูุต โ
- ุชู ุฅูุดุงุก `RateLimitDiagnostic.js` ูุชุดุฎูุต ุงููุดุงูู
- ุชู ุฅูุดุงุก `AdminRateLimitManager.js` ูุฅุฏุงุฑุฉ ุงูุญุฏูุฏ

### 3. ุฃูุงูุฑ ุฅุฏุงุฑูุฉ โ
- ุชู ุฅุถุงูุฉ ุฃูุงูุฑ `/admin` ููุจูุช
- ูููู ูููุดุฑููู ุฅุนุงุฏุฉ ุชุนููู ุงูุญุฏูุฏ ูุฏููุงู

## ููููุฉ ุงูุฅุตูุงุญ ุงูููุฑู

### ุงูุทุฑููุฉ 1: ุชุดุบูู ุณูุฑูุจุช ุงูุฅุตูุงุญ ุงูุณุฑูุน
```bash
cd /tmp/monad-area51-update
node fix-rate-limits.js
```

### ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู ุฃูุงูุฑ ุงูุจูุช ุงูุฅุฏุงุฑูุฉ
```
/admin fix_stuck_limits
/admin reset_user YOUR_USER_ID
/admin emergency YOUR_USER_ID
```

### ุงูุทุฑููุฉ 3: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช
```bash
# ุฅููุงู ุงูุจูุช
pm2 stop monad-bot

# ุชุดุบูู ุงูุจูุช ูุฑุฉ ุฃุฎุฑู
pm2 start monad-bot
```

## ุงูุชุญูู ูู ุงูุฅุตูุงุญ

### 1. ูุญุต ุญุงูุฉ ุงููุณุชุฎุฏู
```bash
node fix-rate-limits.js status YOUR_USER_ID
```

### 2. ูุญุต ุณุฌูุงุช ุงูุจูุช
```bash
pm2 logs monad-bot
```

### 3. ุงุฎุชุจุงุฑ ุชุตุฏูุฑ ุงูููุชุงุญ ุงูุฎุงุต
- ุฌุฑุจ ุชุตุฏูุฑ ุงูููุชุงุญ ุงูุฎุงุต ูู ุงูุจูุช
- ูุฌุจ ุฃู ูุนูู ุจุดูู ุทุจูุนู ุงูุขู

## ููุงุญุธุงุช ูููุฉ

1. **ุงูุฅุตูุงุญ ุฏุงุฆู**: ุชู ุฅุตูุงุญ ุงูุฎุทุฃ ุงูุฃุณุงุณู ูู ุงูููุฏ
2. **ูุง ุญุงุฌุฉ ูุฅุนุงุฏุฉ ุชุดุบูู**: ุงูุณูุฑูุจุช ููุธู ุงูุจูุงูุงุช ุงูุนุงููุฉ
3. **ุขูู**: ุฌููุน ุงูุฅุตูุงุญุงุช ุชุญุงูุธ ุนูู ุฃูุงู ุงููุธุงู
4. **ูุงุจู ููุชุฑุงุฌุน**: ูููู ุงูุชุฑุงุฌุน ุนู ุงูุชุบููุฑุงุช ุฅุฐุง ูุฒู ุงูุฃูุฑ

## ูู ุญุงูุฉ ุงุณุชูุฑุงุฑ ุงููุดููุฉ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญุงุช:

1. ุชุญูู ูู ุงุชุตุงู Redis
2. ุฑุงุฌุน ุณุฌูุงุช ุงูุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุตุญุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
4. ุงุชุตู ุจุงูุฏุนู ุงูุชููู

## ูุนูููุงุช ุชูููุฉ

- **ุงูููู ุงูููุตูุญ**: `src/security/AdvancedRateLimiter.js`
- **ุงูุณุทุฑ ุงูููุตูุญ**: 358
- **ุงูุชุบููุฑ**: `Math.min` โ `Math.max`
- **ุงูุชุฃุซูุฑ**: ุฅุตูุงุญ ุญุณุงุจ ููุช ุฅุนุงุฏุฉ ุงูุชุนููู

---
*ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ุชููุงุฆูุงู ุจูุงุณุทุฉ ูุธุงู ุงูุฅุตูุงุญ ุงูุฐูู*